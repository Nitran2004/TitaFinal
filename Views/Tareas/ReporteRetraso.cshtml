@model IEnumerable<dynamic>

<h2>Reporte de Tareas Retrasadas</h2>

<form method="get" asp-action="ReporteRetraso">
    <div class="form-row">
        <div class="col-md-3">
            <label for="fechaInicio">Fecha de Inicio:</label>
            <input type="date" class="form-control" id="fechaInicio" name="fechaInicio"
                   value="@(ViewData["FechaInicio"] != null ? ((DateTime)ViewData["FechaInicio"]).ToString("yyyy-MM-dd") : "")" required>
        </div>
        <div class="col-md-3">
            <label for="fechaFin">Fecha de Fin:</label>
            <input type="date" class="form-control" id="fechaFin" name="fechaFin"
                   value="@(ViewData["FechaFin"] != null ? ((DateTime)ViewData["FechaFin"]).ToString("yyyy-MM-dd") : "")" required>
        </div>
        <div class="col-md-3">
            <label>&nbsp;</label>
            <button type="submit" class="btn btn-primary btn-block">Filtrar</button>
        </div>
    </div>
</form>

<table class="table table-striped mt-4">
    <thead>
        <tr>
            <th>Tarea</th>
            <th>Fecha de Inicio</th>
            <th>Tiempo Estimado</th>
            <th>Tiempo Utilizado</th>
            <th>Empleado</th>
        </tr>
    </thead>
    <tbody>
        @if (Model != null && Model.Any())
        {
            foreach (var tarea in Model)
            {
                <tr>
                    <td>@tarea.Nombredelatarea</td>
                    <td>@((tarea.FechadeInicio as DateTime?)?.ToString("yyyy-MM-dd"))</td>
                    <td>@tarea.TiempoEstimado</td>
                    <td>@tarea.TiempoUtilizado</td>
                    <td>@tarea.Empleado</td>
                </tr>
            }
        }
        else
        {
            <tr>
                <td colspan="5" class="text-center">No se encontraron tareas retrasadas.</td>
            </tr>
        }
    </tbody>
</table>